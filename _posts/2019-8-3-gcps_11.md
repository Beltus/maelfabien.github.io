---
published: false
title: Lab - Classify Images with Pre-Built ML models using Cloud Vision and AutoML
collection: bgd
layout: single
author_profile: false
read_time: true
categories: [bigdata]
excerpt : "Road to Google Cloud Platform Certification"
header :
    overlay_image: "https://maelfabien.github.io/assets/images/wolf.jpg"
    teaser: "https://maelfabien.github.io/assets/images/wolf.jpg"
comments : true
toc: true
toc_sticky: true
sidebar:
    nav: sidebar-sample
---

The aim of this lab is to :
- Setup API key for ML Vision API
- Invoke the pretrained ML Vision API to classify images
- Review label predictions from Vision API
- Train and evaluate custom AutoML Vision image classification model
- Predict with AutoML on new image



![image](https://maelfabien.github.io/assets/images/gcp_117.png)

```
google4495658_student@cloudshell:~ (qwiklabs-gcp-85d215d05620f509)$ gsutil acl ch -u AllUsers:R gs://qwiklabs-gcp-85d215d05620f509/*
Updated ACL on gs://qwiklabs-gcp-85d215d05620f509/cirrus.png
```


```
google4495658_student@cloudshell:~ (qwiklabs-gcp-85d215d05620f509)$ nano request.json
google4495658_student@cloudshell:~ (qwiklabs-gcp-85d215d05620f509)$ ls
README-cloudshell.txt  request.json
google4495658_student@cloudshell:~ (qwiklabs-gcp-85d215d05620f509)$
```


```
{
    "requests": [
        {
            "image": {
                "source": {
                    "gcsImageUri": "gs://qwiklabs-gcp-85d215d05620f509/cirrus.png"
                }
            },
            "features": [
                {
                    "type": "LABEL_DETECTION",
                    "maxResults": 10
                }
            ]
        }
    ]
}
```


```
curl -s -X POST -H "Content-Type: application/json" --data-binary @request.json  https://vision.googleapis.com/v1/images:annotate?key=AIzaSyCfRFKKn7QWmixQjpaQlimKm53QGq1r5io
```



cloud.google.com/automl/ui/vision


```
export BUCKET=qwiklabs-gcp-85d215d05620f509-vcm
```

```
gsutil -m cp -r gs://automl-codelab-clouds/* gs://qwiklabs-gcp-85d215d05620f509-vcm
```


```
gsutil cp gs://automl-codelab-metadata/data.csv .
```

```
sed -i -e "s/placeholder/qwiklabs-gcp-85d215d05620f509-vcm/g" ./data.csv
```

```
gsutil cp ./data.csv gs://qwiklabs-gcp-85d215d05620f509-vcm
```

